<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>わんLOG</title>
    <link rel="stylesheet" href="css/style.css" />
    <!-- <link rel="stylesheet" href="css/reset.css"> -->
  </head>
  <body>
    <header></header>

    <main>
      <section>
        <h1>わんLOG</h1>
      </section>

      <section>
        <h2>日数カウンター</h2>
        <form id="dateForm">
          <label>生まれた日<input type="date" id="bornDate" /></label>
          <label>うちに来た日<input type="date" id="homeDate" /></label>
          <button type="submit">日数を計算</button>
          <button type="button" id="resetHomeDate">
            うちに来た日をリセット
          </button>
        </form>

        <div id="dayInfo">
          <p id="bornDays"></p>
          <p id="homeDays"></p>
        </div>
      </section>

      <section>
        <h2>今日の天気</h2>
        <p id="walkAdvice">天気情報を取得中...</p>
      </section>

      <section>
        <h2>体調管理</h2>
        <form id="logForm">
          <dl>
            <dt><label>日付</label></dt>
            <dd><input type="date" id="logDate" /></dd>

            <dt><label>元気</label></dt>
            <dd>
              <select name="" id="condition">
                <option value="" selected="selected">
                  状態を選んでください
                </option>
                <option value="veryGood">とても元気</option>
                <option value="good">元気</option>
                <option value="littleDown">少し元気がない</option>
                <option value="notWell">元気がない</option>
                <option value="bad">体調が悪そう</option>
              </select>
            </dd>

            <dt><label>食欲</label></dt>
            <dd>
              <select name="" id="food">
                <option value="" selected="selected">
                  状態を選んでください
                </option>
                <option value="good">旺盛</option>
                <option value="normal">普通</option>
                <option value="someLeft">少し残した</option>
                <option value="notEat">全く食べない</option>
              </select>
            </dd>

            <dt><label>うんち</label></dt>
            <dd>
              <select name="" id="poop">
                <option value="" selected="selected">
                  状態を選んでください
                </option>
                <option value="normal">通常</option>
                <option value="korokoro">コロコロ</option>
                <option value="hard">かたい</option>
                <option value="looseStool">ゆるい</option>
                <option value="no">うんちなし</option>
              </select>
            </dd>

            <dt><label>おしっこ</label></dt>
            <dd>
              <select name="" id="pee">
                <option value="" selected="selected">
                  おおよその状態を選んでください
                </option>
                <option value="normal">普通</option>
                <option value="too">多い</option>
                <option value="few">少ない</option>
                <option value="amber">色が濃い</option>
                <option value="bloody">血尿</option>
              </select>
            </dd>

            <dt><label>散歩</label></dt>
            <dd>
              <select name="" id="walk">
                <option value="" selected="selected">
                  状態を選んでください
                </option>
                <option value="long">ロング散歩</option>
                <option value="short">ショート散歩</option>
                <option value="rainy">雨：屋内かけっこ</option>
                <option value="dislike">行きたがらない</option>
                <option value="cant">行けない</option>
              </select>
            </dd>

            <dt><label>メモ</label></dt>
            <dd><textarea id="memo" rows="5"></textarea></dd>

            <dt><label>画像</label></dt>
            <dd><input type="file" id="photo" accept="image/*" /></dd>
          </dl>
          <button type="submit">保存</button>
        </form>
      </section>

      <section id="logSection">
        <h2>記録一覧</h2>
        <button id="showLogs">ログを見る</button>
        <div id="logDisplay"></div>
      </section>
    </main>

    <footer></footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
      const logKey = "healthLogs"; //healthLogsを全部「logKey」とする

      // ＊＊＊＊＊今日の天気セクション＊＊＊＊＊
      const apiKey = "f53d2635fbbc9041de9c29eecd83a9a2"; //openweathermap のAPIkey
      const lat = 35.68;
      const lon = 139.76;

      $.getJSON(
        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=ja`,
        function (data) {
          const weatherId = data.weather[0].id;
          const description = data.weather[0].description;
          const tempMax = data.main.temp_max;
          const tempMin = data.main.temp_min;

          const weatherText = `🌤 天気: ${description}`;
          const tempText = `🌡 気温: ${tempMin.toFixed(1)}℃〜${tempMax.toFixed(
            1
          )}℃`;

          let advice = "";
          if (weatherId >= 200 && weatherId < 600) {
            advice = "☔️ 雨の可能性あり。屋内かけっこをオススメします";
          } else if (weatherId >= 600 && weatherId < 700) {
            advice = "❄️ 雪かもしれません。防寒をしっかりと！";
          } else if (weatherId === 800) {
            advice = "☀️ 晴れ！ロング散歩日和🐾";
          } else if (weatherId >= 801 && weatherId <= 804) {
            advice = "☁️ 曇り空。体調に合わせてお散歩しましょう";
          } else {
            advice = "天気が不明です。様子を見ながら過ごしましょう";
          }

          $("#walkAdvice").html(`
          ${weatherText}<br>
          ${tempText}<br>
          ${advice}
        `);
        }
      );

      //＊＊＊＊＊ログセクション＊＊＊＊＊

      //＊＊＊＊＊日数計算＊＊＊＊＊
    </script>
  </body>
</html>
